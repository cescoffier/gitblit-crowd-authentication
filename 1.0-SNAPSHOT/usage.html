<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Apr 4, 2012
 | Rendered using Apache Maven Fluido Skin 1.2.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <link rel="stylesheet" href="./css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido.min.js"></script>

    
    <meta name="Date-Revision-yyyymmdd" content="20120404" />
    <meta http-equiv="Content-Language" content="en" />
    
        </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>gitblit-crowd-extension</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2012-04-04</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.0-SNAPSHOT</li>
                      
                
            
      
                  </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                                    <h3>Overview</h3>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
            <strong>Usage</strong>
          </li>
          </ul>
                        <h3>Project Documentation</h3>
                  <ul>
                                                                                                                                                                                                                                                                                                              <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                      
            
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://github.com/cescoffier/gitblit-crowd-authentication" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Configuring the Crowd Extension</h1>

<p>This page explains how to use the Crowd authentication support in Gitblit. We make the assumption that Gitblit is
running within Tomcat and is deployed in <em>GITBLIT</em>DIR<em>. This directory should probably look like: _tomcat-webapps/gitblit</em>.</p>

<h2>Deploying the extension to Giblit</h2>

<p>The <em>dist</em> package contains all required dependencies, so you just have to copy
<em>gitblit-crowd-authentication-$version-dist.jar</em> in <em>GITBLIT</em>DIR/WEB-INF/lib_.</p>

<h2>Configuring the extension</h2>

<p>The extension uses the configuration support from Gitblit. In this context, the configuration is written in:
  <em>GITBLIT</em>DIR<em>/WEB-INF/web.xml</em></p>

<p>Two tasks are required:</p>

<ul>
<li>instructing Gitblit to use the Crowd extension</li>
<li>configuring the extension</li>
</ul>

<h3>Configuring Gitblit to use the Crowd extension</h3>

<p>In the configuration file, search for the <em>real.userService</em> parameter, and replace the value by:
<em>de.akquinet.innovation.gitblit.crowd.CrowdAuthenticationService</em>.</p>

<pre><code>    &lt;context-param&gt;
        &lt;param-name&gt;realm.userService&lt;/param-name&gt;
        &lt;!--&lt;param-value&gt;/opt/gitblit/users.properties&lt;/param-value&gt;--&gt;
        &lt;param-value&gt;de.akquinet.innovation.gitblit.crowd.CrowdAuthenticationService&lt;/param-value&gt;
    &lt;/context-param&gt;
</code></pre>

<h3>Configuring the Crowd access</h3>

<p>Three parameters are required to use the extension:</p>

<ul>
<li>crowd.serverUrl: indicates the Crowd server url</li>
<li>crowd.applicationName: indicates the application name (registered in the Crowd server)</li>
<li>crowd.applicationPassword: indicates the applicaiton password (set in the Crowd server for this application)</li>
</ul>

<p>So, add those parameters to the configuration file such as in:</p>

<pre><code>    &lt;context-param&gt;
        &lt;param-name&gt;crowd.serverUrl&lt;/param-name&gt;
        &lt;param-value&gt;http://172.20.201.194:8095/crowd&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;crowd.applicationName&lt;/param-name&gt;
        &lt;param-value&gt;MY_APP_NAME&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;crowd.applicationPassword&lt;/param-name&gt;
        &lt;param-value&gt;MY_APP_PASSWORD&lt;/param-value&gt;
    &lt;/context-param&gt;
</code></pre>

<h3>Configuring the extension</h3>

<p>The extension can be configured using a couple of settings:</p>

<ul>
<li>crowd.autoAdmin: all authenticated users are set as admin (false by default)</li>
<li>crowd.autoCreateUser: creates a Gitblit user to each authenticated user (recommended, true by default)</li>
<li>crowd.gitblitUsers: if you use <em>autoCreateUser</em>, set the path to the file where gitblit users and teams are stored.</li>
<li><p>crowd.defaultTeam: indicates the name of the team to which all users will be added. The team is created if not existing.
(null by default, so no default team). This setting is useful to give access to a set of repositories automatically.</p>

<pre><code>&lt;context-param&gt;
    &lt;param-name&gt;crowd.autoAdmin&lt;/param-name&gt;
    &lt;param-value&gt;true&lt;/param-value&gt;
&lt;/context-param&gt;
&lt;context-param&gt;
    &lt;param-name&gt;crowd.autoCreateUser&lt;/param-name&gt;
    &lt;param-value&gt;true&lt;/param-value&gt;
&lt;/context-param&gt;
&lt;context-param&gt;
    &lt;param-name&gt;crowd.gitblitUsers&lt;/param-name&gt;
    &lt;param-value&gt;/opt/gitblit/users.properties&lt;/param-value&gt;
&lt;/context-param&gt;
&lt;context-param&gt;
    &lt;param-name&gt;crowd.defaultTeam&lt;/param-name&gt;
    &lt;param-value&gt;akquinet&lt;/param-value&gt;
&lt;/context-param&gt;
</code></pre></li>
</ul>

<h3>All in one</h3>

<pre><code>    &lt;context-param&gt;
        &lt;param-name&gt;realm.userService&lt;/param-name&gt;
        &lt;param-value&gt;de.akquinet.innovation.gitblit.crowd.CrowdAuthenticationService&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;crowd.serverUrl&lt;/param-name&gt;
        &lt;param-value&gt;http://172.20.201.194:8095/crowd&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;crowd.applicationName&lt;/param-name&gt;
        &lt;param-value&gt;MY_APP_NAME&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;crowd.applicationPassword&lt;/param-name&gt;
        &lt;param-value&gt;MY_APP_PASSWORD&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;context-param&gt;
         &lt;param-name&gt;crowd.autoAdmin&lt;/param-name&gt;
         &lt;param-value&gt;true&lt;/param-value&gt;
     &lt;/context-param&gt;
     &lt;context-param&gt;
         &lt;param-name&gt;crowd.autoCreateUser&lt;/param-name&gt;
         &lt;param-value&gt;true&lt;/param-value&gt;
     &lt;/context-param&gt;
     &lt;context-param&gt;
        &lt;param-name&gt;crowd.gitblitUsers&lt;/param-name&gt;
        &lt;param-value&gt;/opt/gitblit/users.properties&lt;/param-value&gt;
    &lt;/context-param&gt;
     &lt;context-param&gt;
         &lt;param-name&gt;crowd.defaultTeam&lt;/param-name&gt;
         &lt;param-value&gt;akquinet&lt;/param-value&gt;
     &lt;/context-param&gt;
</code></pre>

                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span16">Copyright &copy;                    2012
                        <a href="http://www.akquinet.de/en">akquinet</a>.
            All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
